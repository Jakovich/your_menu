"use strict";!function(){var a,b,c=document.querySelectorAll(".menu-ingredient__inner"),d=document.querySelector(".menu-dishes"),e=document.querySelector(".menu-dish__popup"),f=d.querySelectorAll(".menu-dish__btn"),g=document.querySelector(".menu-intro__form"),h=g.portion,i=parseInt(h.value,10),j=d.querySelectorAll(".menu-dishes__item"),k=document.querySelector(".menu-dishes__quantity"),l=document.querySelectorAll(".menu-choice__portion-variant input"),m=e.querySelector(".menu-dish__popup-close"),n=document.querySelector(".menu-dishes__quantity-title--3"),o=document.querySelector(".menu-dishes__quantity-title--5");e.style.display="none";for(var p=0;p<c.length;p++)c[p].style.display="none";var q=function(){for(var a=document.querySelectorAll(".menu-ingredient__title"),b=0;b<a.length;b++)a[b].addEventListener("click",function(){var a=this.parentNode.parentNode,b=a.querySelector(".menu-ingredient__inner");a.hasAttribute("disabled")||("none"===b.style.display?b.style.display="block":b.style.display="none")})};q();var r=function(){if("none"!==e.style.display)for(var c=0;c<b.length;c++)b[c].addEventListener("click",function(){var b=this.parentNode.parentNode,c=b.querySelector(".menu-dish__btn");c.innerHTML="заменить";var g=b.innerHTML,h=a.cloneNode(!0);a.innerHTML=g,e.style.display="none";for(var i=0;i<j.length;i++)j[i].hasAttribute("disabled")?j[i].removeAttribute("disabled"):(j[i].innerHTML===g&&(j[i].innerHTML=h.innerHTML),j[i].setAttribute("disabled","disabled"));f=d.querySelectorAll(".menu-dish__btn"),s(),q()})},s=function(){for(var c=document.querySelector(".menu-dishes__items--popup"),d=0;d<f.length;d++)f[d].addEventListener("click",function(){if(a=this.parentNode.parentNode,!a.hasAttribute("disabled")&&"none"===e.style.display){c.innerHTML="";for(var d=0;d<j.length;d++)if(j[d].hasAttribute("disabled")){var f=j[d].cloneNode(!0);f.removeAttribute("disabled");var g=f.querySelector(".menu-dish__btn");g.innerHTML="выбрать",c.appendChild(f)}q(),e.style.display="block",b=e.querySelectorAll(".menu-dish__btn"),r();for(var d=0;d<j.length;d++)j[d].hasAttribute("disabled")?j[d].removeAttribute("disabled"):j[d].setAttribute("disabled","disabled")}q()})};s();var t=function(){if("none"!==e.style.display){e.style.display="none";for(var a=0;a<j.length;a++)j[a].hasAttribute("disabled")?j[a].removeAttribute("disabled"):j[a].setAttribute("disabled","disabled")}};window.addEventListener("keydown",function(a){27===a.keyCode&&t()}),m.addEventListener("click",function(){t()});var u=function(){k.removeAttribute("disabled");for(var a=0;a<j.length;a++)j[a].removeAttribute("disabled","disabled")},v=function(a){if(3===a){k.setAttribute("disabled","disabled");for(var b=3;b<j.length;b++)j[b].setAttribute("disabled","disabled")}else if(5===a)for(var b=5;b<j.length;b++)j[b].setAttribute("disabled","disabled")};u(),v(i);var w=function(){for(var a=0;a<l.length;a++)l[a].onclick=function(){var a=parseInt(this.value,10);u(),v(a)}};w();var x=function(){o.addEventListener("click",function(){3==h.value&&(h.value=5,u(),v(5))}),n.addEventListener("click",function(){5==h.value&&(h.value=3,u(),v(3))})};x()}();